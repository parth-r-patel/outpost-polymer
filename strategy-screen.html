<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="json-table.html">
<link rel="import" href="bower_components/core-ajax/core-ajax.html">
<polymer-element name="strategy-screen" attributes = "tableData">
	<template>
		<button id="Teams" on-click="{{getTeamList}}">Team List</button>
		<button id="Matches" on-click="{{getMatchSchedule}}">Match Schedule</button>
		<input id="numberInput">
		<button id="Team" on-click="{{getTeam}}">Find Team</button>
		<button id="Match" on-click="{{getMatch}}">Find Match</button>
		<json-table _json= "{{tableData}}" id="tableView"></json-table>
		<core-ajax id="ajaxRequest"
				   auto
				   method="GET"
	  		url="../../rest/matches"
	  		on-core-response="{{Response}}"
		    headers='{"Content-Type": "application/json"}'
	  		handleAs="json">
		</core-ajax>
        
	</template>
	
	<script>
		Polymer({
			tableData: [],
			tableDataChanged: function(oldValue, newValue){
				this.$.tableView._json = newValue;
			},
			getMatchSchedule: function(){
				this.$.ajaxRequest.url = "../../rest/matches";
			},
			getTeamList: function(){
				this.$.ajaxRequest.url = "../../rest/teams";
			},
			getTeam: function(){
				var input = this.$.numberInput.value;
				this.$.ajaxRequest.url = "../../rest/team/" + input;
			},
			getMatch: function(){
				var input = this.$.numberInput.value;
				this.$.ajaxRequest.url = "../../rest/match/" + input;
			},
			Response: function(){
				this.tableData = this.$.ajaxRequest.response;
			}
		});	
	</script>
</polymer-element>